const _=require("underscore"),Swal=require("sweetalert2"),pedirCartas0=document.querySelector("#pedirCarta"),detenerJuego0=document.querySelector("#detener"),nuevoJuegos0=document.querySelector("#nuevo");pedirCartas0.classList.add("disabled"),detenerJuego0.classList.add("disabled");export class JuegoCartas{deck=[];letraCartas=["C","D","H","S"];cartasEspeciales=["Q","K","J","A"];pedirCartas=document.querySelector("#pedirCarta");detenerJuego=document.querySelector("#detener");nuevo=document.querySelector("#nuevo");cartas=document.querySelectorAll(".cartas");puntosUsuarios=[0,0];puntos=document.querySelectorAll(".puntos");constructor(){}iniciarJuego(){this.crearDeck(),this.nuevo.classList.add("disabled"),pedirCartas0.classList.remove("disabled"),detenerJuego0.classList.remove("disabled");for(let e=0;e<this.puntosUsuarios.length;e++)this.puntosUsuarios[e]=0,this.cartas[e].innerHTML="",this.puntos[e].innerText=0;console.log(this.puntosUsuarios)}crearDeck(){for(let e=2;e<=10;e++)for(let s of this.letraCartas)this.deck.push(e+s);for(let e of this.cartasEspeciales)for(let s of this.letraCartas)this.deck.push(e+s);return this.deck=_.shuffle(this.deck),this.deck}pedirCarta(){if(0===this.deck.length)throw"no hay cartas en el deck";return this.deck.pop()}valorCarta(e){const s=e.substring(0,e.length-1);return isNaN(s)?"A"===s?11:10:1*s}calcularPuntos(e,s){return console.log(e,s),this.puntosUsuarios[e]=this.valorCarta(s)+this.puntosUsuarios[e],this.puntos[e].innerHTML=this.puntosUsuarios[e],console.log(this.puntosUsuarios[e]),this.puntosUsuarios[e]}crearCarta(e,s){const t=document.createElement("img");t.src=`./assets/img/cartas/${e}.png`,this.cartas[s].append(t)}turnoComputadora(e){let s=0;do{let e=this.pedirCarta();if(this.crearCarta(e,this.puntosUsuarios.length-1),s=this.calcularPuntos(this.puntosUsuarios.length-1,e),s+=0,s>=21||s>21)break}while(s<e&&e<=21);s===e?(Swal.fire("Empate nadie Gana &#128534;"),console.log("es un empate"),this.nuevo.classList.remove("disabled"),detenerJuego0.classList.add("disabled"),pedirCartas0.classList.add("disabled")):s>e&&s<=21?(Swal.fire('Computadora Gana <span class="emoji">&#128516;</span>'),this.nuevo.classList.remove("disabled"),detenerJuego0.classList.add("disabled"),pedirCartas0.classList.add("disabled")):e>s&&e<21?(Swal.fire(" Ganaste !!!! &#128512;"),this.nuevo.classList.remove("disabled"),detenerJuego0.classList.add("disabled"),pedirCartas0.classList.add("disabled")):e<s?(Swal.fire(" Ganaste !!!! &#128512; "),this.nuevo.disabled=!1,this.nuevo.classList.remove("disabled"),detenerJuego0.classList.add("disabled"),pedirCartas0.classList.add("disabled")):e>s&&(Swal.fire("Computadora Gana &#128540;"),this.nuevo.disabled=!1,this.nuevo.classList.remove("disabled"),detenerJuego0.classList.add("disabled"),pedirCartas0.classList.add("disabled"))}pedir(){let e=this.pedirCarta();return this.crearCarta(e,0),setTimeout((()=>{let s=this.calcularPuntos(0,e);s>21?(this.pedir.disabled=!0,this.detener.disabled=!0,this.turnoComputadora(s)):21==s&&(this.turnoComputadora(s),this.pedir.disabled=!0,this.detener.disabled=!0)}),10),puntos}detener(){this.pedirCartas.disabled=!0,this.nuevo.disabled=!1,this.turnoComputadora(this.puntosUsuarios[0])}}